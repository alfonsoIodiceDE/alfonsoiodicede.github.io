<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Linear Regression (part 2)</title>
    <meta charset="utf-8" />
    <meta name="author" content="Statistical Learning" />
    <script src="Linear-Regression-part_2_files/header-attrs/header-attrs.js"></script>
    <link href="Linear-Regression-part_2_files/animate.css/animate.xaringan.css" rel="stylesheet" />
    <script src="Linear-Regression-part_2_files/fabric/fabric.min.js"></script>
    <link href="Linear-Regression-part_2_files/xaringanExtra-scribble/scribble.css" rel="stylesheet" />
    <script src="Linear-Regression-part_2_files/xaringanExtra-scribble/scribble.js"></script>
    <script>document.addEventListener('DOMContentLoaded', function() { window.xeScribble = new Scribble({"pen_color":["#FF0000"],"pen_size":3,"eraser_size":30,"palette":[]}) })</script>
    <script src="Linear-Regression-part_2_files/kePrint/kePrint.js"></script>
    <link href="Linear-Regression-part_2_files/lightable/lightable.css" rel="stylesheet" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Linear Regression (part 2)
## with tidymodels
### Statistical Learning
### Alfonso Iodice D'Enza

---






class: animated fadeIn 
### Interactions 




```r
library(scatterplot3d)
adv_fit_update = adv_wflow %&gt;% update_formula(sales~.-newspaper) %&gt;% fit(data=adv_data)
 
data3d=adv_fit_update %&gt;% extract_fit_engine() %&gt;% augment(data=adv_data) %&gt;% 
  mutate(und_ov_est = ifelse(.std.resid&lt;0,"indianred","blue")) %&gt;% select(TV, radio, sales, und_ov_est)

plot_3d = scatterplot3d(x=data3d$TV,y=data3d$radio,z=data3d$sales,xlab="TV",ylab="radio",zlab="sales",color=data3d$und_ov_est,pch=16,box=FALSE,grid=TRUE)
plot_3d$plane3d(adv_fit_update %&gt;% extract_fit_engine(),draw_polygon=TRUE,polygon_args = list(col = rgb(.1,.6,.4,.25)))
```

&lt;img src="Linear-Regression-part_2_files/figure-html/unnamed-chunk-2-1.png" width="45%" style="display: block; margin: auto;" /&gt;







---
class: animated fadeIn center middle 

.center[&lt;h2 style="color:orange"&gt; intermission: more stuff you know of &lt;/h2&gt;]

---
class: animated fadeIn center middle inverse

### Goodness-of-fit

### Global test statistic F

### testing blocks of predictors

### autocorrelation

### heteroschedasticity

### outliers and high leverage

### multicollinearity


---
class: animated fadeIn center middle 
.center[&lt;h2 style="color:orange"&gt; end of intermission &lt;/h2&gt;]

---
class: animated fadeIn center middle inverse

## estimate the model performance (on the test set)

### resampling methods


---
class: animated fadeIn 
### the credit data set

**want**: predict balance as a response



```r
library(janitor)
data(Credit,package = "ISLR2")
credit=Credit %&gt;% clean_names() 
credit %&gt;% slice_sample(n=12) %&gt;% kbl() %&gt;% kable_styling(font_size = 10)
```

&lt;table class="table" style="font-size: 10px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; income &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; limit &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; rating &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; cards &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; education &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; own &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; student &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; married &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; region &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; balance &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 21.786 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4632 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 355 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 50 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; No &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; No &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Yes &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 580 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 57.337 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5310 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 392 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 45 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Yes &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; No &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; No &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 456 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 20.918 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1233 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 128 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 47 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Yes &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Yes &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Yes &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; West &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 62.413 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6457 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 455 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 71 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Yes &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; No &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Yes &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 762 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 42.529 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4986 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 369 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 37 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; No &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; No &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Yes &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; West &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 489 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 76.782 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5977 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 429 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 44 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; No &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; No &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Yes &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; West &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 548 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 29.725 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3536 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 270 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 52 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Yes &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; No &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; No &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; East &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 133 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 148.924 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9504 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 681 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 36 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Yes &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; No &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; No &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; West &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 964 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 58.165 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6617 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 460 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 56 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Yes &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; No &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Yes &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 856 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 15.629 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2493 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 186 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 60 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; No &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; No &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Yes &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; West &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 62.328 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5228 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 377 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 83 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; No &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; No &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; No &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 380 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 41.365 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5303 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 377 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 45 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; No &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; No &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; No &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 606 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---
class: animated fadeIn 
### a (random) smaller version of the credit data set


```r
set.seed(1234)
credit_small = credit %&gt;% select(balance,sample(names(credit)[-11],3)) 
credit_small %&gt;% slice_sample(n=12) %&gt;% kbl() %&gt;% kable_styling(font_size = 10)
```

&lt;table class="table" style="font-size: 10px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; balance &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; region &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; education &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 47 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; West &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 57 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; West &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 912 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; East &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 13 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 49 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; West &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 62 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 155 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; East &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 74 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1587 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 56 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 637 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; East &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 19 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 44 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1176 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; East &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 52 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 732 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 66 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 391 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 45 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 75 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 772 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 48 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---
class: animated fadeIn 
### validation approaches

.my-pull-left[

**train/test**

]

.my-pull-right[
&gt;Randomly select a proportion (e.g. **.75**) of observations for **training**, the rest is for **testing**
]

--

.my-pull-left[

**validation set**

]

.my-pull-right[
&gt;Select a proportion (e.g. **.8**) of observations to **train** the model, the rest is for **validation**
]

--

.my-pull-left[

&amp;nbsp;

**cross-validation**

]

.my-pull-right[
&gt; - **Leave-one-out** cross-validation: all observations but one are for training, the one left is for validation. The procedure is iterated  on the observations, until each  observation is used for validation.
&gt;
&gt; - **K-fold** cross-validation: K-1 folds are for training, the K$^{th}$ fold is for validation. The procedure is iterated  untill each fold is used for validation.
&gt; - the CV estimate of the evaluation metric is the average over the ** `\(n\)` ** (or, ** K **) iterations
]


---
class: animated fadeIn 
### Validation-set to assess model performance 


.my-pull-left[

**train/test split**

]

.my-pull-right[


```r
first_split = initial_split(data = credit_small,prop=.75,strata = balance)
cred_tr = training(first_split)
cred_test = testing(first_split)
```

]

--

.my-pull-left[

**analysis/ validate split**

]

.my-pull-right[


```r
val_split = validation_split(data = cred_tr, prop=.8,strata = balance)
```

]

--

** split ** and ** resample ** object: print just minimal info

.pull-left[

```r
first_split
```

```
## &lt;Analysis/Assess/Total&gt;
## &lt;299/101/400&gt;
```
]

.pull-right[

```r
val_split
```

```
## # Validation Set Split (0.8/0.2)  using stratification 
## # A tibble: 1 × 2
##   splits           id        
##   &lt;list&gt;           &lt;chr&gt;     
## 1 &lt;split [239/60]&gt; validation
```
]

---
class: animated fadeIn 
### Validation-set to assess model performance 

** split objects **:  they are lists

.pull-left[

```r
glimpse(first_split)
```

```
## List of 4
##  $ data  :'data.frame':	400 obs. of  4 variables:
##   ..$ balance  : num [1:400] 333 903 580 964 331 ...
##   ..$ region   : Factor w/ 3 levels "East","South",..: 2 3 3 3 2 2 1 3 2 1 ...
##   ..$ education: num [1:400] 11 15 11 11 16 10 12 9 13 19 ...
##   ..$ age      : num [1:400] 34 82 71 36 68 77 37 87 66 41 ...
##  $ in_id : int [1:299] 12 16 17 23 25 32 34 35 41 49 ...
##  $ out_id: logi NA
##  $ id    : tibble [1 × 1] (S3: tbl_df/tbl/data.frame)
##   ..$ id: chr "Resample1"
##  - attr(*, "class")= chr [1:2] "mc_split" "rsplit"
```
]

.pull-right[

```r
str(val_split)
```

```
## validation_split [1 × 2] (S3: validation_split/rset/tbl_df/tbl/data.frame)
##  $ splits:List of 1
##   ..$ :List of 4
##   .. ..$ data  :'data.frame':	299 obs. of  4 variables:
##   .. .. ..$ balance  : num [1:299] 0 0 0 0 0 0 0 0 50 0 ...
##   .. .. ..$ region   : Factor w/ 3 levels "East","South",..: 2 1 1 1 2 3 2 3 1 3 ...
##   .. .. ..$ education: num [1:299] 16 15 17 10 15 16 10 14 14 15 ...
##   .. .. ..$ age      : num [1:299] 64 57 73 61 57 43 30 25 54 72 ...
##   .. ..$ in_id : int [1:239] 3 4 5 8 10 11 12 13 14 15 ...
##   .. ..$ out_id: logi NA
##   .. ..$ id    : tibble [1 × 1] (S3: tbl_df/tbl/data.frame)
##   .. .. ..$ id: chr "validation"
##   .. ..- attr(*, "class")= chr [1:2] "val_split" "rsplit"
##  $ id    : chr "validation"
##  - attr(*, "prop")= num 0.8
##  - attr(*, "strata")= logi TRUE
##  - attr(*, "fingerprint")= chr "95463bd733510d7274291db8f6792543"
```
]

---
class: animated fadeIn 
### Validation-set to assess model performance 

Note:  ** `\(\texttt{training()}/\texttt{testing()}\)` ** and ** `\(\texttt{analysis()}/\texttt{assessment()}\)` ** are equivalent helper functions to extract the data from the split object...


.pull-left[

```r
training(first_split) %&gt;% slice(1:6) %&gt;% kbl() %&gt;% kable_styling(font_size = 8)
```

&lt;table class="table" style="font-size: 8px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; balance &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; region &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; education &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 64 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; East &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 57 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; East &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 73 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; East &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 61 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 57 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; West &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 43 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

.pull-right[

```r
first_split$data[first_split$in_id,] %&gt;% slice(1:6) %&gt;% kbl() %&gt;% kable_styling(font_size = 8)
```

&lt;table class="table" style="font-size: 8px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; balance &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; region &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; education &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 64 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; East &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 57 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; East &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 73 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; East &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 61 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 57 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; West &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 43 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]



.pull-left[

```r
testing(first_split) %&gt;% slice(1:6) %&gt;% kbl() %&gt;% kable_styling(font_size = 8)
```

&lt;table class="table" style="font-size: 8px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; balance &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; region &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; education &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 333 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 34 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 903 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; West &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 82 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1151 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 77 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 204 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; West &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 57 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1081 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 49 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 891 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; West &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 28 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

.pull-right[

```r
first_split$data[-first_split$in_id,] %&gt;% slice(1:6) %&gt;% kbl() %&gt;% kable_styling(font_size = 8)
```

&lt;table class="table" style="font-size: 8px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; balance &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; region &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; education &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 333 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 34 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 903 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; West &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 82 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1151 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 77 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 204 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; West &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 57 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1081 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 49 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 891 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; West &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 28 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]



---
class: animated fadeIn 
### Validation-set to assess model performance 

Note:  ** `\(\texttt{training()}/\texttt{testing()}\)` ** and ** `\(\texttt{analysis()}/\texttt{assessment()}\)` ** are equivalent helper functions to extract the data from the split object...


.pull-left[

```r
analysis(first_split) %&gt;% slice(1:6) %&gt;% kbl() %&gt;% kable_styling(font_size = 8)
```

&lt;table class="table" style="font-size: 8px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; balance &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; region &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; education &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 64 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; East &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 57 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; East &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 73 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; East &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 61 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 57 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; West &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 43 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

.pull-right[

```r
first_split$data[first_split$in_id,] %&gt;% slice(1:6) %&gt;% kbl() %&gt;% kable_styling(font_size = 8)
```

&lt;table class="table" style="font-size: 8px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; balance &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; region &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; education &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 64 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; East &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 57 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; East &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 73 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; East &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 61 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 57 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; West &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 43 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]



.pull-left[

```r
assessment(first_split) %&gt;% slice(1:6) %&gt;% kbl() %&gt;% kable_styling(font_size = 8)
```

&lt;table class="table" style="font-size: 8px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; balance &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; region &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; education &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 333 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 34 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 903 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; West &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 82 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1151 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 77 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 204 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; West &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 57 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1081 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 49 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 891 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; West &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 28 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

.pull-right[

```r
first_split$data[-first_split$in_id,] %&gt;% slice(1:6) %&gt;% kbl() %&gt;% kable_styling(font_size = 8)
```

&lt;table class="table" style="font-size: 8px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; balance &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; region &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; education &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 333 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 34 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 903 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; West &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 82 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1151 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 77 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 204 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; West &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 57 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1081 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; South &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 49 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 891 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; West &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 28 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]


---
class: animated fadeIn 
### Validation-set to assess model performance 


** pre-processing **


```r
cred_an = analysis(val_split %&gt;% pull(splits) %&gt;% .[[1]])
cred_prep = recipe(balance~., data = cred_an)
```

--

** model-spec **


```r
cred_mod = linear_reg(mode="regression", engine="lm")
```

--

** workflow setup  **


```r
cred_wflow = workflow() %&gt;% 
  add_recipe(cred_prep) %&gt;% 
  add_model(cred_mod)
```

---
class: animated fadeIn 
### Validation-set to assess model performance 

** model fit  **

```r
cred_fit = cred_wflow %&gt;% 
  fit(cred_an)
```

--

** assessment set predictions  **


```r
cred_as = assessment(val_split %&gt;%  pull(splits) %&gt;% .[[1]])
cred_preds = cred_fit %&gt;% augment(cred_as) %&gt;% select(balance,.pred)
cred_preds %&gt;% slice_sample(n=3) %&gt;% kbl() %&gt;% kable_styling(font_size=9)
```

&lt;table class="table" style="font-size: 9px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; balance &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; .pred &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 429 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 547.6457 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 843 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 512.9616 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1120 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 501.6879 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

--

** assessment metric: RMSE **


```r
cred_preds %&gt;% rmse(truth=balance, estimate=.pred) %&gt;% 
  kbl() %&gt;% kable_styling(font_size=9)
```

&lt;table class="table" style="font-size: 9px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; .metric &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; .estimator &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; .estimate &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; rmse &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; standard &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 455.6267 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


---
class: animated fadeIn 
### Validation-set to assess model performance: a shortcut 

** RMSE computation  **

```r
*cred_wflow %&gt;%
* fit_resamples(val_split) %&gt;%
  collect_metrics()
```



```
## # Resampling results
## # Validation Set Split (0.8/0.2)  using stratification 
## # A tibble: 1 × 4
##   splits           id         .metrics         .notes          
##   &lt;list&gt;           &lt;chr&gt;      &lt;list&gt;           &lt;list&gt;          
## 1 &lt;split [239/60]&gt; validation &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 1]&gt;
```

---
class: animated fadeIn 
### Validation-set to assess model performance: shortcut 

** RMSE computation  **

```r
*cred_wflow %&gt;%
* fit_resamples(val_split) %&gt;%
* collect_metrics()
```

&lt;table class="table" style="font-size: 9px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; .metric &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; .estimator &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; mean &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; std_err &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; .config &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; rmse &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; standard &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 455.6267 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Preprocessor1_Model1 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;




---
class: animated fadeIn 
### v-fold cross validation to assess model performance 

** data split: folds **


```r
cred_folds = vfold_cv(cred_tr,v=5,strata=balance)
```

--

** pre-processing **


```r
cred_prep = recipe(balance~., data = cred_tr)
```

--

** model-spec **


```r
cred_mod = linear_reg(mode="regression", engine="lm")
```

--

** workflow setup  **


```r
cred_wflow = workflow() %&gt;% 
  add_recipe(cred_prep) %&gt;% 
  add_model(cred_mod)
```

---
class: animated fadeIn 
### v-fold cross validation to assess model performance 

** model fit  **

```r
cred_fit_vfolds = cred_wflow %&gt;% 
  fit_resamples(cred_folds)
```


```
## # Resampling results
## # 5-fold cross-validation using stratification 
## # A tibble: 5 × 4
##   splits           id    .metrics         .notes          
##   &lt;list&gt;           &lt;chr&gt; &lt;list&gt;           &lt;list&gt;          
## 1 &lt;split [239/60]&gt; Fold1 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 1]&gt;
## 2 &lt;split [239/60]&gt; Fold2 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 1]&gt;
## 3 &lt;split [239/60]&gt; Fold3 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 1]&gt;
## 4 &lt;split [239/60]&gt; Fold4 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 1]&gt;
## 5 &lt;split [240/59]&gt; Fold5 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 1]&gt;
```

--

** cross-validated RMSE **

```r
cred_fit_vfolds %&gt;% 
  collect_metrics() %&gt;% filter(.metric == "rmse") %&gt;% 
  kbl() %&gt;% kable_styling(font_size = 9)
```

&lt;table class="table" style="font-size: 9px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; .metric &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; .estimator &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; mean &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; std_err &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; .config &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; rmse &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; standard &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 456.6134 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11.20367 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Preprocessor1_Model1 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---
class: animated fadeIn 
### Leave One Out cross validation to assess model performance 

Note: Leave one out cross-validation is somewhat deprecated, and while there is a specific function  ** `\(\texttt{loo_cv}\)` ** in ** `\(\texttt{rsample}\)` **. 
  
** LOO-CV splits **

```r
cred_loo = loo_cv(cred_tr)
```

--

The function is not supported by ** `\(\texttt{fit_resamples}\)` **: a workaround is to use still  ** `\(\texttt{v_fold_cv}\)` ** and set as many folds as the as the rows in the training set


```r
cred_loo = vfold_cv(cred_tr,v=nrow(cred_tr))
```

---
class: animated fadeIn 
### Leave One Out cross validation to assess model performance 

** model fit  **

```r
cred_fit_loo = cred_wflow %&gt;%
  fit_resamples(cred_loo)
```

--

** cross-validated RMSE **

```r
cred_fit_loo %&gt;%
  collect_metrics() %&gt;% filter(.metric == "rmse") %&gt;%
  kbl() %&gt;% kable_styling(font_size = 9)
```

&lt;table class="table" style="font-size: 9px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; .metric &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; .estimator &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; mean &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; std_err &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; .config &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; rmse &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; standard &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 389.9147 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 299 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14.094 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Preprocessor1_Model1 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


---
class: animated fadeIn center middle inverse 

### Hyperparameter tuning


---
class: animated fadeIn 
### tiny example on polynomial regression: balance vs rating

Consider a tiny example of a tuning process:  


```r
credit_tiny = credit %&gt;% select(rating, balance)
credit_split = initial_split(credit_tiny,prop=3/4)
credit_tiny %&gt;% mutate(train_test = replace(rep("test", n()),credit_split$in_id,"train")
                       ) %&gt;% 
  ggplot(aes(x = rating,y = balance,color=train_test)) + geom_point() + theme_minimal()
```

&lt;img src="Linear-Regression-part_2_files/figure-html/unnamed-chunk-39-1.png" width="40%" style="display: block; margin: auto;" /&gt;


---
class: animated fadeIn 
### tiny example on polynomial regression: balance vs rating

- define the CV-folds on the training set  


```r
tiny_cred_folds = vfold_cv(training(credit_split),5)
```

--

- the degree of the polynomial is set at a recipe level. Since it is an hyperparameter, we set it to ** `\(\texttt{tune()}\)` **, a place holder


```r
tiny_rec = recipe(formula = balance~rating, data = training(credit_split)) %&gt;% 
  step_poly(rating, degree=tune())
```
--
The model specification does not change, so ** `\(\texttt{cred_mod}\)` ** can still be used. The workflow is then


```r
tiny_wflow = workflow() %&gt;% add_recipe(tiny_rec) %&gt;% add_model(cred_mod)
```

--
It now takes to specify the hyperparameter values grid, and use the function ** `\(\texttt{tune_grid()}\)` ** that does all the job


```r
hparm_grid = tibble(degree=1:10)
tiny_cred_tuning = tiny_wflow %&gt;% 
  tune_grid(resamples = tiny_cred_folds,
            grid = hparm_grid,
            control = control_grid(save_pred = TRUE)
  )
```

---
class: animated fadeIn 
### tiny example on polynomial regression: balance vs rating

Check the results

```r
tiny_cred_tuning %&gt;%  collect_metrics() %&gt;% filter(.metric=="rmse") %&gt;% slice_min(mean) %&gt;% 
  kbl() %&gt;% kable_styling(font_size = 10)
```

&lt;table class="table" style="font-size: 10px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; degree &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; .metric &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; .estimator &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; mean &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; std_err &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; .config &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; rmse &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; standard &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 215.0154 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.148388 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Preprocessor07_Model1 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

```r
autoplot(tiny_cred_tuning,metric = "rmse")+theme_minimal()
```

&lt;img src="Linear-Regression-part_2_files/figure-html/unnamed-chunk-44-1.png" width="25%" style="display: block; margin: auto;" /&gt;

---
class: animated fadeIn 
### tiny example on polynomial regression: balance vs rating

Select the best performing model 


```r
tiny_cred_final_mod = tiny_cred_tuning %&gt;% select_best("rmse")
```

Finalize the workflow (meaning: tell the workflow to pick the best model)


```r
final_wflow=tiny_wflow %&gt;% finalize_workflow(tiny_cred_final_mod)
```


Final fit and evaluation of the model: fit on the training, evaluate on the test. Pick ** `\(\texttt{credit_split}\)` ** which is the result of the first split (** `\(\texttt{initial_split()}\)` **)


```r
tiny_final_fit = final_wflow %&gt;% 
  last_fit(credit_split)

tiny_final_fit %&gt;% extract_fit_parsnip()
```

```
## parsnip model object
## 
## Fit time:  2ms 
## 
## Call:
## stats::lm(formula = ..y ~ ., data = data)
## 
## Coefficients:
##   (Intercept)  rating_poly_1  rating_poly_2  rating_poly_3  rating_poly_4  
##         537.0         6923.0         -794.7         -115.0         1181.9  
## rating_poly_5  rating_poly_6  rating_poly_7  
##        -724.6         -415.9          401.8
```

```r
tiny_final_fit %&gt;% collect_metrics("rmse")
```

```
## # A tibble: 2 × 4
##   .metric .estimator .estimate .config             
##   &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               
## 1 rmse    standard     229.    Preprocessor1_Model1
## 2 rsq     standard       0.732 Preprocessor1_Model1
```
---
class: animated fadeIn 
### tiny example on polynomial regression: balance vs rating


```r
tiny_final_fit %&gt;% extract_fit_parsnip()
```

```
## parsnip model object
## 
## Fit time:  2ms 
## 
## Call:
## stats::lm(formula = ..y ~ ., data = data)
## 
## Coefficients:
##   (Intercept)  rating_poly_1  rating_poly_2  rating_poly_3  rating_poly_4  
##         537.0         6923.0         -794.7         -115.0         1181.9  
## rating_poly_5  rating_poly_6  rating_poly_7  
##        -724.6         -415.9          401.8
```

```r
tiny_final_fit %&gt;% collect_metrics("rmse") %&gt;% kbl() %&gt;% kable_styling(font_size = 8)
```

&lt;table class="table" style="font-size: 8px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; .metric &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; .estimator &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; .estimate &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; .config &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; rmse &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; standard &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 229.2952944 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Preprocessor1_Model1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; rsq &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; standard &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.7324706 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Preprocessor1_Model1 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


---
class: animated fadeIn 
### tiny example on polynomial regression: balance vs rating


```r
tiny_final_fit %&gt;% extract_fit_parsnip()
```

```
## parsnip model object
## 
## Fit time:  2ms 
## 
## Call:
## stats::lm(formula = ..y ~ ., data = data)
## 
## Coefficients:
##   (Intercept)  rating_poly_1  rating_poly_2  rating_poly_3  rating_poly_4  
##         537.0         6923.0         -794.7         -115.0         1181.9  
## rating_poly_5  rating_poly_6  rating_poly_7  
##        -724.6         -415.9          401.8
```

```r
tiny_final_fit %&gt;% collect_metrics("rmse") %&gt;% kbl() %&gt;% kable_styling(font_size = 8)
```

&lt;table class="table" style="font-size: 8px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; .metric &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; .estimator &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; .estimate &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; .config &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; rmse &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; standard &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 229.2952944 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Preprocessor1_Model1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; rsq &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; standard &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.7324706 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Preprocessor1_Model1 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"navigation": {
"scroll": false
},
"slideNumberFormat": "%current%",
"highlightStyle": "github",
"highlightLines": true,
"ratio": "16:9",
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
